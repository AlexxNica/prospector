(function(b){var e={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function i(m,l){return l*Math.floor(m/l)}function k(t,n,o,m){if(typeof t.strftime=="function"){return t.strftime(n)}var x=function(y,r){y=""+y;r=""+(r==null?"0":r);return y.length==1?r+y:y};var l=[];var w=false;var v=t.getHours();var s=v<12;if(o==null){o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(m==null){m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}var p;if(v>12){p=v-12}else{if(v==0){p=12}else{p=v}}for(var q=0;q<n.length;++q){var u=n.charAt(q);if(w){switch(u){case"a":u=""+m[t.getDay()];break;case"b":u=""+o[t.getMonth()];break;case"d":u=x(t.getDate());break;case"e":u=x(t.getDate()," ");break;case"h":case"H":u=x(v);break;case"I":u=x(p);break;case"l":u=x(p," ");break;case"m":u=x(t.getMonth()+1);break;case"M":u=x(t.getMinutes());break;case"q":u=""+(Math.floor(t.getMonth()/3)+1);break;case"S":u=x(t.getSeconds());break;case"y":u=x(t.getFullYear()%100);break;case"Y":u=""+t.getFullYear();break;case"p":u=(s)?("am"):("pm");break;case"P":u=(s)?("AM"):("PM");break;case"w":u=""+t.getDay();break}l.push(u);w=false}else{if(u=="%"){w=true}else{l.push(u)}}}return l.join("")}function f(q){function n(t,r,p,s){t[r]=function(){return p[s].apply(p,arguments)}}var m={date:q};if(q.strftime!=undefined){n(m,"strftime",q,"strftime")}n(m,"getTime",q,"getTime");n(m,"setTime",q,"setTime");var l=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var o=0;o<l.length;o++){n(m,"get"+l[o],q,"getUTC"+l[o]);n(m,"set"+l[o],q,"setUTC"+l[o])}return m}function g(m,l){if(l.timezone=="browser"){return new Date(m)}else{if(!l.timezone||l.timezone=="utc"){return f(new Date(m))}else{if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var n=new timezoneJS.Date();n.setTimezone(l.timezone);n.setTime(m);return n}else{return f(new Date(m))}}}}var c={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,quarter:3*30*24*60*60*1000,year:365.2425*24*60*60*1000};var h=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"]];var a=h.concat([[3,"month"],[6,"month"],[1,"year"]]);var d=h.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function j(l){l.hooks.processOptions.push(function(n,m){b.each(n.getAxes(),function(q,o){var p=o.options;if(p.mode=="time"){o.tickGenerator=function(x){var E=[];var C=g(x.min,p);var u=0;var G=(p.tickSize&&p.tickSize[1]==="quarter")||(p.minTickSize&&p.minTickSize[1]==="quarter")?d:a;if(p.minTickSize!=null){if(typeof p.tickSize=="number"){u=p.tickSize}else{u=p.minTickSize[0]*c[p.minTickSize[1]]}}for(var B=0;B<G.length-1;++B){if(x.delta<(G[B][0]*c[G[B][1]]+G[B+1][0]*c[G[B+1][1]])/2&&G[B][0]*c[G[B][1]]>=u){break}}var I=G[B][0];var D=G[B][1];if(D=="year"){if(p.minTickSize!=null&&p.minTickSize[1]=="year"){I=Math.floor(p.minTickSize[0])}else{var s=Math.pow(10,Math.floor(Math.log(x.delta/c.year)/Math.LN10));var r=(x.delta/c.year)/s;if(r<1.5){I=1}else{if(r<3){I=2}else{if(r<7.5){I=5}else{I=10}}}I*=s}if(I<1){I=1}}x.tickSize=p.tickSize||[I,D];var A=x.tickSize[0];D=x.tickSize[1];var w=A*c[D];if(D=="second"){C.setSeconds(i(C.getSeconds(),A))}else{if(D=="minute"){C.setMinutes(i(C.getMinutes(),A))}else{if(D=="hour"){C.setHours(i(C.getHours(),A))}else{if(D=="month"){C.setMonth(i(C.getMonth(),A))}else{if(D=="quarter"){C.setMonth(3*i(C.getMonth()/3,A))}else{if(D=="year"){C.setFullYear(i(C.getFullYear(),A))}}}}}}C.setMilliseconds(0);if(w>=c.minute){C.setSeconds(0)}if(w>=c.hour){C.setMinutes(0)}if(w>=c.day){C.setHours(0)}if(w>=c.day*4){C.setDate(1)}if(w>=c.month*2){C.setMonth(i(C.getMonth(),3))}if(w>=c.quarter*2){C.setMonth(i(C.getMonth(),6))}if(w>=c.year){C.setMonth(0)}var H=0;var F=Number.NaN;var y;do{y=F;F=C.getTime();E.push(F);if(D=="month"||D=="quarter"){if(A<1){C.setDate(1);var t=C.getTime();C.setMonth(C.getMonth()+(D=="quarter"?3:1));var z=C.getTime();C.setTime(F+H*c.hour+(z-t)*A);H=C.getHours();C.setHours(0)}else{C.setMonth(C.getMonth()+A*(D=="quarter"?3:1))}}else{if(D=="year"){C.setFullYear(C.getFullYear()+A)}else{C.setTime(F+w)}}}while(F<x.max&&F!=y);return E};o.tickFormatter=function(B,s){var w=g(B,s.options);if(p.timeformat!=null){return k(w,p.timeformat,p.monthNames,p.dayNames)}var x=(s.options.tickSize&&s.options.tickSize[1]=="quarter")||(s.options.minTickSize&&s.options.minTickSize[1]=="quarter");var C=s.tickSize[0]*c[s.tickSize[1]];var y=s.max-s.min;var A=(p.twelveHourClock)?" %p":"";var z=(p.twelveHourClock)?"%I":"%H";var r;if(C<c.minute){r=z+":%M:%S"+A}else{if(C<c.day){if(y<2*c.day){r=z+":%M"+A}else{r="%b %d "+z+":%M"+A}}else{if(C<c.month){r="%b %d"}else{if((x&&C<c.quarter)||(!x&&C<c.year)){if(y<c.year){r="%b"}else{r="%b %Y"}}else{if(x&&C<c.year){if(y<c.year){r="Q%q"}else{r="Q%q %Y"}}else{r="%Y"}}}}}var u=k(w,r,p.monthNames,p.dayNames);return u}}})})}b.plot.plugins.push({init:j,options:e,name:"time",version:"1.0"});b.plot.formatDate=k;b.plot.dateGenerator=g})(jQuery);